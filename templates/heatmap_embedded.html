<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City Safety Rankings</title>
    <link rel="stylesheet" href="../static/styles.css">
    <style>
        /* Fade-in animation CSS */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1s ease, transform 1s ease;
        }

        /* Active class for elements in the viewport */
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
    <!-- Preload other pages to make it faster when navigating -->
    <link rel="preload" href="safest_cities.html" as="document">
    <link rel="preload" href="crime_heatmap.html" as="document">
    <link rel="preload" href="crime_index.html" as="document">
</head>
<body>
    <header>
        <h1>Data Visualizations</h1>
        <nav>
            <ul>
                <li><a href="{{ url_for('prop1') }}">Home</a></li>
                <li><a href="{{ url_for('prop2') }}">Data</a></li>
                <li><a href="{{ url_for('prop3') }}">Visualizations</a></li>
            </ul>
        </nav>
    </header>

    <main>

        <!-- Second Section (City Safety Rankings Map) -->
        <section class="fade-in">
            <h2>Interactive City Safety Map</h2>
            <p>Explore the safety rankings of cities with this interactive map. Hover over the map to get detailed crime data for each city.</p>
            
            <!-- Embed the Folium map -->
            <!-- Ensure map.html is in the correct path -->
            <iframe src="{{ url_for('static', filename='lineplot_with_dropdown.html') }}" width="100%" height="600" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
            
            <p>Use the map to explore the safety data for cities across the country.</p>
        </section>

        <!-- Third Section -->
        <section class="fade-in">
            <h2>Crime Index by City</h2>
            <p>This chart visualizes the crime index of various cities, showing how crime rates correlate with safety and living conditions. It helps to identify which cities have the highest and lowest crime rates, giving valuable insights for potential residents or visitors.</p>
            
            <!-- Button to Link to the Crime Index Chart -->
            <a href="crime_index.html" class="button-link">
                <button onclick="navigateTo('crime_index.html')">View Crime Index Chart</button>
            </a>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Your Website</p>
    </footer>

    <script>
        // Function to navigate to the target page
        function navigateTo(url) {
            window.location.href = url;
        }

        // Button hover animation
        document.querySelectorAll('button').forEach(button => {
            button.addEventListener('mouseover', () => {
                button.style.transform = 'scale(1.05)';
                button.style.transition = 'transform 0.2s ease';
            });

            button.addEventListener('mouseout', () => {
                button.style.transform = 'scale(1)';
            });
        });

        // Function to handle fade-in animation on scroll
        function handleScrollAnimation() {
            const sections = document.querySelectorAll('.fade-in');
            sections.forEach(section => {
                const sectionPosition = section.getBoundingClientRect().top;
                const screenPosition = window.innerHeight / 1.2;

                if (sectionPosition < screenPosition) {
                    section.classList.add('visible');
                }
            });
        }

        // Event listener for scrolling
        window.addEventListener('scroll', handleScrollAnimation);

        // Initial trigger to load animations on page load
        handleScrollAnimation();
    </script>
</body>
</html>
